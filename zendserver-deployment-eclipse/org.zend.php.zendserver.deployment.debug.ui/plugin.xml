<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="deployWizardContribution" name="Deployment Wizard Contribution" schema="schema/deployWizardContribution.exsd"/>
  <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.zend.php.zendserver.deployment.ui.targets.TargetsViewer?after=dropMenu">
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.launchApplication"
               icon="icons/obj16/run_exc.gif"
               label="%command.label"
               style="push">
            <parameter
                  name="mode"
                  value="run">
            </parameter>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.launchApplication"
               icon="icons/obj16/debug_exc.gif"
               label="%command.label.0"
               style="push">
            <parameter
                  name="mode"
                  value="debug">
            </parameter>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.deployApplication"
               icon="icons/obj16/deploy_exc.png"
               label="%command.label.1"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.zend.php.zendserver.deployment.ui.targetsview?after=popupGroup1">
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.OpenDeploymentWizard"
               label="%command.label.2"
               style="push">
           <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="org.eclipse.debug.core.ILaunchConfiguration">
                  </instanceof>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.launchApplication"
               icon="icons/obj16/run_exc.gif"
               label="%command.label.3"
               style="push">
            <parameter
                  name="mode"
                  value="run">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="org.eclipse.debug.core.ILaunchConfiguration">
                  </instanceof>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.launchApplication"
               icon="icons/obj16/debug_exc.gif"
               label="%command.label.4"
               style="push">
            <parameter
                  name="mode"
                  value="debug">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="org.eclipse.debug.core.ILaunchConfiguration">
                  </instanceof>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.openSshTunnel"
               label="%command.label.5"
               style="push">
           <visibleWhen
                  checkEnabled="true">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <instanceof
                       value="org.zend.sdklib.target.IZendTarget">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="propertyTester.openSSHTunnel.visible"
                       value="false">
                 </test>
              </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.startDebugMode"
               label="%command.label.6"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="propertyTester.debugMode.visible"
                        value="false">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.stopDebugMode"
               label="%command.label.7"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="propertyTester.debugMode.visible"
                        value="true">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="org.zend.php.zendserver.deployment.debug.ui.debugModePreferences"
               label="%command.label.8"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <test
                        forcePluginActivation="true"
                        property="propertyTester.debugModePreferences.visible"
                        value="true">
                  </test>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.LaunchApplicationHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.launchApplication"
            name="%command.name">
         <commandParameter
               id="mode"
               name="%commandParameter.name"
               optional="false">
         </commandParameter>
         <commandParameter
               id="projectName"
               name="%commandParameter.name.0"
               optional="false">
         </commandParameter>
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.DeployApplicationHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.deployApplication"
            name="%command.name.0">
            <commandParameter
               id="mode"
               name="%commandParameter.name.1"
               optional="false">
         </commandParameter>
         <commandParameter
               id="projectName"
               name="%commandParameter.name.2"
               optional="false">
         </commandParameter>
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.OpenApplicationHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.OpenDeploymentWizard"
            name="%command.name.1">
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.OpenTunnelCommand"
            id="org.zend.php.zendserver.deployment.debug.openSshTunnel"
            name="%command.name.2">
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.StartDebugModeHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.startDebugMode"
            name="%command.name.3">
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.StopDebugModeHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.stopDebugMode"
            name="%command.name.4">
      </command>
      <command
            defaultHandler="org.zend.php.zendserver.deployment.debug.ui.commands.DebugModePreferencesHandler"
            id="org.zend.php.zendserver.deployment.debug.ui.debugModePreferences"
            name="%command.name.5">
      </command>
   </extension>
   <extension
         point="org.eclipse.php.debug.ui.launchConfigurationTabs">
      <launchConfigurationTab
            class="org.zend.php.zendserver.deployment.debug.ui.config.DeploymentLaunchConfigurationTab"
            id="org.zend.php.zendserver.deployment.debug.ui.deploymentTab"
            launchConfigurationTabGroupId="org.eclipse.php.server.ui.launchConfigurationTabGroup"
            modes="run,debug">
      </launchConfigurationTab>
   </extension>
   <extension
         point="org.eclipse.php.debug.core.phpLaunchDelegateListener">
      <launchDelegateListener
            class="org.zend.php.zendserver.deployment.debug.ui.listeners.DeploymentLaunchListener">
      </launchDelegateListener>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.debug.core.ILaunchConfiguration"
            class="org.zend.php.zendserver.deployment.debug.ui.adapter.AdapterFactory">
         <adapter
               type="org.eclipse.jface.viewers.IDoubleClickListener">
         </adapter>
      </factory>
   </extension>
   <extension
         point="org.zend.php.zendserver.deployment.ui.testingSectionContribution">
      <contribution
            class="org.zend.php.zendserver.deployment.debug.ui.contributions.RunApplicationContribution">
      </contribution>
      <contribution
            class="org.zend.php.zendserver.deployment.debug.ui.contributions.DebugApplicationContribution">
      </contribution>
      <contribution
            class="org.zend.php.zendserver.deployment.debug.ui.contributions.DeployApplicationContribution">
      </contribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.zend.php.zendserver.deployment.debug.ui.commands.DebugModeTester"
            id="org.zend.php.zendserver.deployment.debug.ui.debugModeTester"
            namespace="propertyTester.debugMode"
            properties="visible"
            type="java.lang.Object">
      </propertyTester>
      <propertyTester
            class="org.zend.php.zendserver.deployment.debug.ui.commands.DebugModePreferencesTester"
            id="org.zend.php.zendserver.deployment.debug.ui.debugModePreferencesTester"
            namespace="propertyTester.debugModePreferences"
            properties="visible"
            type="java.lang.Object">
      </propertyTester>
      <propertyTester
            class="org.zend.php.zendserver.deployment.debug.ui.commands.OpenTunnelPropertyTester"
            id="org.zend.php.zendserver.deployment.debug.ui.openSSHTester"
            namespace="propertyTester.openSSHTunnel"
            properties="visible"
            type="java.lang.Object">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.php.debug.ui.preferences.PhpDebugPreferencePage"
            class="org.zend.php.zendserver.deployment.debug.ui.preferences.DebugModePreferencesPage"
            id="org.zend.php.zendserver.deployment.ui.DebugModePreferencePage"
            name="%page.name">
      </page>
   </extension>

</plugin>
